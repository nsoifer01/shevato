/* Theme CSS Variables */
:root {
    /* Page backgrounds */
    --bg-page: #1a202c;
    --bg-gradient: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
    --bg-container: rgba(45, 55, 72, 0.95);
    
    /* Component backgrounds */
    --bg-sidebar: #1a202c;
    --bg-card: #2d3748;
    --bg-input: #4a5568;
    --bg-dropdown: #2d3748;
    --bg-modal: #2d3748;
    --bg-tooltip: #1f2937;
    
    /* Text colors */
    --text-primary: #e2e8f0;
    --text-secondary: #a0aec0;
    --text-tertiary: #718096;
    --text-muted: #4a5568;
    --text-white: #ffffff;
    --text-inverse: #1a202c;
    
    /* Border colors */
    --border-color: #4a5568;
    --border-focus: #667eea;
    --border-error: #ef4444;
    --border-success: #10b981;
    
    /* Button colors */
    --btn-primary-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --btn-primary-hover: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
    --btn-secondary-bg: #6b7280;
    --btn-secondary-hover: #4b5563;
    --btn-success-bg: #10b981;
    --btn-success-hover: #059669;
    --btn-danger-bg: #ef4444;
    --btn-danger-hover: #dc2626;
    --btn-warning-bg: #f59e0b;
    --btn-warning-hover: #d97706;
    
    /* Interactive states */
    --hover-bg: rgba(255, 255, 255, 0.05);
    --hover-border: #6b7280;
    --active-bg: rgba(255, 255, 255, 0.1);
    --focus-ring: rgba(102, 126, 234, 0.1);
    
    /* Status colors */
    --success-color: #34d399;
    --error-color: #ef4444;
    --warning-color: #f59e0b;
    --info-color: #3b82f6;
    
    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.25);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
    
    /* Gradients */
    --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --success-gradient: linear-gradient(135deg, #34d399 0%, #059669 100%);
    --danger-gradient: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    
    /* Scrollbar colors */
    --scrollbar-track: rgba(255, 255, 255, 0.05);
    --scrollbar-thumb: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
    --scrollbar-thumb-hover: linear-gradient(180deg, #5a67d8 0%, #6b46c1 100%);
}

/* Base Theme Styles */
body {
    background: var(--bg-gradient);
    color: var(--text-primary);
}

body .container {
    background: var(--bg-container);
    color: var(--text-primary);
}

body .input-section {
    background: var(--bg-card);
}

body .stat-card,
body .race-history,
body #history-table {
    background: var(--bg-card);
    color: var(--text-primary);
}

body th,
body #history-table th {
    background: var(--bg-sidebar);
    color: var(--text-primary);
}

body td,
body #history-table td {
    background: var(--bg-card);
    color: var(--text-primary);
    border-color: var(--border-color);
}

body #history-heading {
    color: var(--text-primary);
}

/* Stepper styling */
body .stepper-display {
    background: var(--bg-input);
    color: var(--text-primary);
    border-color: var(--border-color);
}

body .stepper-btn {
    background: #667eea;
    color: white;
}

body .stepper-btn:hover {
    background: #5a67d8;
}

body .input-field input[type="number"] {
    background: var(--bg-input);
    color: var(--text-primary);
    border-color: var(--border-color);
}

body .input-field input[type="number"]:focus {
    background: var(--bg-card);
    border-color: var(--border-focus);
}

/* Visualization text elements */
body .heat-percentage {
    color: var(--text-muted);
}

body .heat-percentage.no-data {
    color: var(--text-primary) !important;
}

body .achievement-number {
    color: var(--text-muted);
}

body .achievement-number.no-data {
    color: var(--text-primary) !important;
}

/* Achievement and position heat bars */
body .achievement-bar {
    border-color: rgba(255, 255, 255, 0.1);
}

body .position-heat-bar {
    border-color: rgba(255, 255, 255, 0.1);
}

/* Expanded achievements */
body .achievement-bar.achievement-expanded {
    background: rgba(102, 126, 234, 0.3);
    border-color: rgba(102, 126, 234, 0.5);
}

body .expanded-achievement-item {
    background: rgba(45, 55, 72, 0.8);
    border-color: rgba(74, 85, 104, 0.5);
}

body .expanded-achievement-item.active-streak-glow {
    border-color: rgba(52, 211, 153, 0.4);
    box-shadow: 0 0 10px rgba(52, 211, 153, 0.25);
}

body .expanded-achievement-bar .achievement-number {
    color: var(--text-primary);
}

body .expanded-achievement-bar .achievement-name {
    color: #f7fafc;
}

body .achievement-close-icon {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
}

body .achievement-close-icon:hover {
    background: rgba(239, 68, 68, 0.3);
    color: #fca5a5;
}

body .expanded-achievement-details {
    color: var(--text-primary);
    background: rgba(45, 55, 72, 0.6);
    border-left-color: rgba(102, 126, 234, 0.6);
}

/* Active streak indicator */
body .achievement-bar.active-streak::before {
    background: #34d399;
}

body .achievement-bar.has-data::before {
    background: rgba(226, 232, 240, 0.7);
}

@keyframes activePulseDark {
    0%, 100% {
        box-shadow: 0 0 0 0 rgba(52, 211, 153, 0.4);
    }
    50% {
        box-shadow: 0 0 0 3px rgba(52, 211, 153, 0.15);
    }
}

body .achievement-bar.active-streak {
    animation: activePulseDark 2s ease-in-out infinite;
}

/* Achievement toggle buttons */
body .achievement-toggle-active-btn {
    background: rgba(52, 211, 153, 0.15);
    border-color: rgba(52, 211, 153, 0.25);
    color: #34d399;
}

body .achievement-toggle-active-btn:hover {
    background: rgba(52, 211, 153, 0.2);
    border-color: rgba(52, 211, 153, 0.35);
}

/* Position heat expanded sections */
body .position-heat-bar.position-heat-expanded {
    background: rgba(102, 126, 234, 0.3);
    border-color: rgba(102, 126, 234, 0.5);
}

body .expanded-position-heat-title {
    color: var(--text-primary);
}

body .expanded-position-heat-item {
    background: rgba(45, 55, 72, 0.8);
    border-color: rgba(74, 85, 104, 0.5);
}

body .expanded-position-heat-bar .position-heat-count {
    color: var(--text-primary);
}

body .expanded-position-heat-bar .position-heat-avg {
    color: #f7fafc;
}

body .position-heat-close-icon {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
}

body .position-heat-close-icon:hover {
    background: rgba(239, 68, 68, 0.3);
    color: #fca5a5;
}

body .expanded-position-heat-details {
    color: var(--text-primary);
    background: rgba(45, 55, 72, 0.6);
    border-left-color: rgba(102, 126, 234, 0.6);
}

body .spot-number {
    color: var(--text-muted);
}

body tr:hover {
    background: #4a5568;
}

body input[type="number"],
body input[type="date"] {
    background: var(--bg-input);
    color: var(--text-primary);
    border-color: #6b7280;
}

body input[type="number"]::placeholder,
body input[type="date"]::placeholder {
    color: #cbd5e0 !important;
}

body .names-dropdown,
body .fixed-names-dropdown {
    background: var(--bg-dropdown);
    border-color: var(--border-color);
    color: var(--text-primary);
}

body .names-compact-grid input {
    background: var(--bg-input);
    color: var(--text-primary);
    border-color: #6b7280;
}

/* Filter and toggle buttons */
body .filter-btn {
    background: #4a5568;
    color: var(--text-primary);
    border: 1px solid #6b7280;
}

body .filter-btn:hover {
    background: #667eea;
    color: white;
}

body .filter-btn.active {
    background: #667eea;
    color: white;
}

body .toggle-btn {
    background: #4a5568;
    color: var(--text-primary);
    border: 1px solid #6b7280;
}

body .toggle-btn:hover {
    background: #667eea;
    color: white;
}

body .toggle-btn.active {
    background: #667eea;
    color: white;
}

/* Visualization guide */
body .bars-legend {
    background: var(--bg-card);
    color: var(--text-primary);
}

body .bars-legend h3 {
    color: var(--text-primary);
}

body .legend-item {
    background: #4a5568;
    color: var(--text-primary);
}

body .legend-text {
    color: var(--text-primary);
}

body .legend-text strong {
    color: #f7fafc;
}

body .legend-text small {
    color: #a0aec0 !important;
}

body .achievement-details h4 {
    color: var(--text-primary);
}

body .achievement-info strong {
    color: #f7fafc;
}

body .achievement-info small {
    color: #a0aec0;
}

body .achievement-expanded-item {
    background: #4a5568;
    color: var(--text-primary);
}

/* Position heat bars */
body .heat-label {
    color: var(--text-primary);
}

body .spot-number {
    color: #ffffff !important;
}

/* All headings */
body main h1,
body .main-content h1,
body .mario-kart-container h1 {
    color: var(--text-primary) !important;
}

body main h2,
body .main-content h2,
body .mario-kart-container h2 {
    color: var(--text-primary) !important;
}

body main h3,
body .main-content h3,
body .mario-kart-container h3 {
    color: var(--text-primary) !important;
}

body main h4,
body .main-content h4,
body .mario-kart-container h4 {
    color: var(--text-primary) !important;
}

body label {
    color: var(--text-primary) !important;
}

/* General text color */
body {
    color: var(--text-primary) !important;
}

/* Various components */
body .date-filter-section {
    background: var(--bg-card);
    color: var(--text-primary);
}

body .date-filter-section h3 {
    color: var(--text-primary);
}

body .chart-container {
    background: var(--bg-card);
}

body .heatmap-container {
    background: var(--bg-card);
}

body .analysis-card {
    background: var(--bg-card);
    color: var(--text-primary);
}

body .analysis-title {
    color: var(--text-primary);
}

body .comeback-item,
body .best-day-item {
    background: #4a5568;
}

body .worst-day-item {
    background: rgba(239, 68, 68, 0.1);
    border-left-color: #ef4444;
}

body .worst-day-score {
    color: #fca5a5;
}

/* Player names and stats */
body .player-name {
    color: #ffffff !important;
}

body .stat-count {
    color: #000000 !important;
}

body .stat-title {
    color: white !important;
}

/* Modern H2H elements */
body .h2h-table-container {
    background: var(--bg-card);
    border-color: rgba(255, 255, 255, 0.1);
}

body .h2h-table,
body .h2h-daily-table {
    background: var(--bg-card);
}

body .h2h-header-cell {
    background: var(--bg-card) !important;
    color: white !important;
}

body .h2h-header-cell.h2h-corner {
    background: var(--bg-card) !important;
}

body .h2h-player-name {
    background: linear-gradient(135deg, #374151 0%, #1f2937 100%) !important;
    color: #d1d5db !important;
}

body .h2h-self {
    background: linear-gradient(135deg, #4b5563 0%, #374151 100%) !important;
}

body .h2h-self-text {
    color: rgba(255, 255, 255, 0.9) !important;
}

body .h2h-streak {
    background: rgba(0, 0, 0, 0.3);
}

body .h2h-daily-label {
    background: rgba(0, 0, 0, 0.3);
}

body .h2h-daily-table .h2h-cell {
    color: #1f2937 !important;
}

body .h2h-daily-table .h2h-winner-text {
    background: #34d399 !important;
    color: #1f2937 !important;
}

body .h2h-daily-table .h2h-loser-text {
    background: #ef4444 !important;
    color: #1f2937 !important;
}

body .h2h-daily-table .h2h-tie {
    background: #fbbf24 !important;
    color: #1f2937 !important;
}

body .h2h-daily-item {
    border-bottom-color: #4b5563 !important;
}

body .h2h-date {
    color: #d1d5db !important;
}

body .h2h-daily-results {
    color: #9ca3af !important;
}

body .h2h-cell.h2h-winner-text {
    background: #34d399 !important;
    color: #1f2937 !important;
}

body .h2h-cell.h2h-loser-text {
    background: #ef4444 !important;
    color: #1f2937 !important;
}

body .h2h-cell.h2h-tie {
    background: #fbbf24 !important;
    color: #1f2937 !important;
}

body .h2h-cell.h2h-no-data {
    background: #4b5563 !important;
    color: #d1d5db !important;
}

body .h2h-matchup.win {
    color: #10b981 !important;
}

body .h2h-matchup.loss {
    color: #ef4444 !important;
}

/* Calendar popup styling */
body input[type="date"]::-webkit-datetime-edit {
    background: var(--bg-input) !important;
    color: var(--text-primary) !important;
}

body input[type="date"]::-webkit-datetime-edit-fields-wrapper {
    background: var(--bg-input) !important;
}

body input[type="date"]::-webkit-datetime-edit-text {
    color: var(--text-primary) !important;
}

body input[type="date"]::-webkit-datetime-edit-year-field {
    background: var(--bg-input) !important;
    color: var(--text-primary) !important;
}

body input[type="date"]::-webkit-datetime-edit-month-field {
    background: var(--bg-input) !important;
    color: var(--text-primary) !important;
}

body input[type="date"]::-webkit-datetime-edit-day-field {
    background: var(--bg-input) !important;
    color: var(--text-primary) !important;
}

/* Force dark styling on the calendar picker */
body .race-date-input {
    color-scheme: dark !important;
}

/* Custom date range inputs */
body #filter-start-date,
body #filter-end-date {
    color-scheme: dark !important;
    background: var(--bg-input) !important;
    color: var(--text-primary) !important;
    border-color: #6b7280 !important;
}

body #filter-start-date::-webkit-calendar-picker-indicator,
body #filter-end-date::-webkit-calendar-picker-indicator {
    filter: invert(1);
}

/* Player count selector */
body .player-count-selector {
    border-bottom-color: #4b5563;
}

body .player-count-selector label {
    color: #ffffff !important;
    font-weight: 700;
}

body .player-count-selector select {
    background: #374151;
    color: white;
    border-color: #4b5563;
}

/* Race date section */
body .race-date-section label {
    color: var(--text-primary) !important;
}

body .race-date-input {
    background: var(--bg-input);
    color: var(--text-primary);
    border-color: #6b7280;
}

body .race-date-input:focus {
    border-color: var(--border-focus);
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

body .race-date-input::-webkit-calendar-picker-indicator {
    filter: invert(1);
}

/* Frequency gradient display */
body .frequency-gradient {
    display: inline !important;
}

/* Sidebar */
body .sidebar {
    background: var(--bg-sidebar);
}

body #sidebar-player-settings .sidebar-players-form,
body .position-picker {
    background: var(--bg-sidebar);
}

/* Fixed date dropdown */
body .fixed-date-dropdown {
    background: var(--bg-card);
    border-color: var(--border-color);
    color: var(--text-primary);
}

/* H2H streak and biggest win styles */
body .h2h-streak-main {
    color: #000000 !important;
}

body .h2h-streak-details {
    color: #000000 !important;
}

body .h2h-biggest-win {
    color: #000000 !important;
}

body .h2h-score {
    color: #000000 !important;
}

body .h2h-streak-number {
    color: #000000 !important;
}

body .h2h-streak-label {
    color: #000000 !important;
}

body .h2h-streak-date {
    color: #000000 !important;
}

body .h2h-daily-label {
    color: #000000 !important;
}